<!DOCTYPE html>
<html lang="en">
<head>
    <script src="objectDefaultFiles/object.js"></script>
    <script src="objectDefaultFiles/pep.min.js"></script>
    <script src="objectDefaultFiles/envelopeContents.js"></script>
    <meta charset="UTF-8">
    <title>graphUI</title>
</head>
<body style="width: 690px; height: 462px;">

<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 194.42 130.24">
    <defs>
        <style>
            #graph {
                stroke: #00ff00;
                fill: none;
                stroke-width: 2px;
            }
            
            .dataFont {
                font-family: "Avenir", "Futura", Helvetica Neue, Helvetica, Arial, sans-serif;
                font-size: 10pt;
                alignment: right;
                fill: cyan;
            }
            
            .cls-1 {
                opacity: 0.5;
            }

            .cls-2 {
                opacity: 0.25;
            }

            .cls-3 {
                fill: #75fbfd;
            }

            .cls-4 {
                fill: #008480;
            }
        </style>
    </defs>
    <title>Asset 29</title>
    <g id="Layer_2" data-name="Layer 2">
        <g id="UI">
            <g>
                <g>
                    <g class="cls-1">
                        <polygon points="0 108.08 0 130.24 11.6 130.24 194.42 130.24 194.42 119.68 194.42 108.08 0 108.08"/>
                    </g>
                    <g class="cls-2">
                        <path class="cls-3" d="M192.42,110.08v18.16H2V110.08H192.42m2-2H0v22.16H194.42V108.08Z"/>
                    </g>
                </g>
                <g class="cls-1">
                    <polygon class="cls-4" points="164 0 0 0 0 87.97 0 106.62 164 106.62 194.42 106.62 194.42 87.97 194.42 0 164 0"/>
                </g>
                <g class="cls-1">
                    <rect x="124.81" y="5.33" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="124.81" y="26.03" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="124.81" y="46.72" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="124.81" y="67.42" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="85.29" y="5.33" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="85.29" y="26.03" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="85.29" y="46.72" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="85.29" y="67.42" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="45.78" y="5.33" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="45.78" y="26.03" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="45.78" y="46.72" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="45.78" y="67.42" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="6.27" y="5.33" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="6.27" y="26.03" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="6.27" y="46.72" width="37.63" height="18.81"/>
                </g>
                <g class="cls-1">
                    <rect x="6.27" y="67.42" width="37.63" height="18.81"/>
                </g>
                <g>
                    <path class="cls-3" d="M52.14,96.52h.4c0,.36.32.56.75.56s.6-.16.6-.39-.11-.28-.4-.35l-.64-.17c-.39-.1-.61-.28-.61-.66s.38-.76,1-.76,1,.31,1,.91h-.4c0-.36-.26-.54-.64-.54s-.57.16-.57.36.1.27.36.34l.63.16c.44.1.66.3.66.68s-.39.79-1,.79S52.14,97.12,52.14,96.52Z"/>
                    <path class="cls-3" d="M55.16,96.5v-.79a1,1,0,0,1,1.07-1,.93.93,0,0,1,1.05,1v.54H55.56v.25c0,.36.25.59.67.59s.58-.15.63-.46h.4a.91.91,0,0,1-1,.83A.94.94,0,0,1,55.16,96.5Zm.4-.59h1.32V95.7c0-.35-.24-.58-.66-.58s-.66.23-.66.58Z"/>
                    <path class="cls-3" d="M58.13,96.49v-.78a.93.93,0,0,1,1-1,.92.92,0,0,1,1,.92v0h-.4v0c0-.33-.24-.55-.64-.55s-.65.22-.65.58v.8c0,.36.23.58.65.58s.64-.22.64-.56v0h.4v0a1.05,1.05,0,0,1-2.09,0Z"/>
                    <path class="cls-3" d="M48.25,95.39h0a.62.62,0,0,1,.24-.08l.24,0a1.22,1.22,0,0,1,.43.08,1,1,0,0,1,.34.23,1,1,0,0,1,.22.35,1.33,1.33,0,0,1,.08.45,1.19,1.19,0,0,1-.09.47.94.94,0,0,1-.25.34,1,1,0,0,1-.38.22,1.39,1.39,0,0,1-.46.08,1.4,1.4,0,0,1-.47-.08,1,1,0,0,1-.38-.22.94.94,0,0,1-.25-.34,1.19,1.19,0,0,1-.09-.47,1.44,1.44,0,0,1,.09-.53,2.94,2.94,0,0,1,.25-.46l.94-1.5h.49Zm.37.26a.94.94,0,0,0-.3,0,.87.87,0,0,0-.25.15.77.77,0,0,0-.22.55.75.75,0,0,0,.06.31.78.78,0,0,0,.16.24.87.87,0,0,0,.25.15.94.94,0,0,0,.3.05,1,1,0,0,0,.3-.05,1,1,0,0,0,.24-.15.78.78,0,0,0,.16-.24.75.75,0,0,0,.06-.31.77.77,0,0,0-.22-.55,1,1,0,0,0-.24-.15A1,1,0,0,0,48.62,95.65Z"/>
                </g>
                <g>
                    <path class="cls-3" d="M88.78,97.39v-.76H87.16v-.31l1.32-2.44h.35V94l-1.21,2.24h1.16v-.93h.4v.93h.45v.37h-.45v.76Z"/>
                    <path class="cls-3" d="M91.76,96.52h.4c0,.36.33.56.75.56s.61-.16.61-.39-.12-.28-.41-.35l-.63-.17c-.4-.1-.62-.28-.62-.66s.38-.76,1-.76,1,.31,1,.91h-.4c0-.36-.27-.54-.65-.54s-.57.16-.57.36.1.27.37.34l.62.16c.44.1.67.3.67.68s-.4.79-1,.79S91.76,97.12,91.76,96.52Z"/>
                    <path class="cls-3" d="M94.78,96.5v-.79a1,1,0,0,1,1.08-1,.93.93,0,0,1,1,1v.54H95.18v.25c0,.36.25.59.68.59s.57-.15.62-.46h.41a.91.91,0,0,1-1,.83A1,1,0,0,1,94.78,96.5Zm.4-.59H96.5V95.7c0-.35-.24-.58-.66-.58a.58.58,0,0,0-.66.58Z"/>
                    <path class="cls-3" d="M97.75,96.49v-.78a.94.94,0,0,1,1-1,.92.92,0,0,1,1,.92v0h-.4v0c0-.33-.24-.55-.64-.55s-.65.22-.65.58v.8c0,.36.23.58.65.58s.64-.22.64-.56v0h.4v0a.93.93,0,0,1-1,.93A.94.94,0,0,1,97.75,96.49Z"/>
                </g>
                <g>
                    <path class="cls-3" d="M166.12,17.25v-3h-.34V14l.49-.3h.25v3.52Z"/>
                    <path class="cls-3" d="M167.62,17.25v-.67h.47v.67Z"/>
                    <path class="cls-3" d="M169.08,16.16V14.82a1.15,1.15,0,1,1,2.29,0v1.34a1.15,1.15,0,1,1-2.29,0ZM171,14.8a.75.75,0,1,0-1.49,0v1.38a.75.75,0,1,0,1.49,0Z"/>
                    <path class="cls-3" d="M172.35,16.16V14.82a1.15,1.15,0,1,1,2.3,0v1.34a1.15,1.15,0,1,1-2.3,0Zm1.9-1.36a.71.71,0,0,0-.75-.77.7.7,0,0,0-.74.77v1.38a.7.7,0,0,0,.74.78.71.71,0,0,0,.75-.78Z"/>
                    <path class="cls-3" d="M175.63,16.16V14.82a1.15,1.15,0,1,1,2.29,0v1.34a1.15,1.15,0,1,1-2.29,0Zm1.89-1.36a.75.75,0,1,0-1.49,0v1.38a.75.75,0,1,0,1.49,0Z"/>
                </g>
                <g>
                    <path class="cls-3" d="M165.94,36.28V34.94a1.15,1.15,0,1,1,2.29,0v1.34a1.15,1.15,0,1,1-2.29,0Zm1.89-1.36a.72.72,0,0,0-.75-.78.71.71,0,0,0-.74.78V36.3a.71.71,0,0,0,.74.78.72.72,0,0,0,.75-.78Z"/>
                    <path class="cls-3" d="M169.22,37.37V36.7h.48v.67Z"/>
                    <path class="cls-3" d="M171.18,37.37v-.15l1.16-3h-1.42v.62h-.37v-1h2.21v.34l-1.22,3.18Z"/>
                    <path class="cls-3" d="M173.47,36.43h.4a.73.73,0,0,0,.77.65c.48,0,.73-.34.73-.86s-.28-.83-.72-.83a.73.73,0,0,0-.64.31h-.4l.16-1.85h1.8v.37h-1.46l-.1,1.07a1.11,1.11,0,0,1,.71-.24,1.07,1.07,0,0,1,.76.29,1.2,1.2,0,0,1,.29.87,1.16,1.16,0,0,1-2.3.22Z"/>
                    <path class="cls-3" d="M176.7,36.28V34.94a1.15,1.15,0,1,1,2.29,0v1.34a1.15,1.15,0,1,1-2.29,0Zm1.89-1.36a.75.75,0,1,0-1.49,0V36.3a.75.75,0,1,0,1.49,0Z"/>
                </g>
                <g>
                    <path class="cls-3" d="M165.94,57.7V56.37a1.15,1.15,0,1,1,2.29,0V57.7a1.15,1.15,0,1,1-2.29,0Zm1.89-1.35a.72.72,0,0,0-.75-.78.71.71,0,0,0-.74.78v1.38a.7.7,0,0,0,.74.77.71.71,0,0,0,.75-.77Z"/>
                    <path class="cls-3" d="M169.22,58.79v-.66h.48v.66Z"/>
                    <path class="cls-3" d="M170.64,57.86h.41a.72.72,0,0,0,.76.64c.49,0,.74-.33.74-.86s-.28-.83-.73-.83a.78.78,0,0,0-.64.31h-.4l.17-1.84h1.8v.36h-1.47l-.09,1.07a1.13,1.13,0,0,1,.7-.23,1,1,0,0,1,.76.29,1.15,1.15,0,0,1,.3.87,1.1,1.1,0,0,1-1.15,1.23A1.09,1.09,0,0,1,170.64,57.86Z"/>
                    <path class="cls-3" d="M173.87,57.7V56.37a1.15,1.15,0,1,1,2.3,0V57.7a1.15,1.15,0,1,1-2.3,0Zm1.9-1.35a.72.72,0,0,0-.75-.78.71.71,0,0,0-.74.78v1.38a.7.7,0,0,0,.74.77.71.71,0,0,0,.75-.77Z"/>
                    <path class="cls-3" d="M177.15,57.7V56.37a1.15,1.15,0,1,1,2.29,0V57.7a1.15,1.15,0,1,1-2.29,0ZM179,56.35a.75.75,0,1,0-1.49,0v1.38a.75.75,0,1,0,1.49,0Z"/>
                </g>
                <g>
                    <path class="cls-3" d="M165.94,76.92V75.59a1.15,1.15,0,1,1,2.29,0v1.33a1.15,1.15,0,1,1-2.29,0Zm1.89-1.35a.72.72,0,0,0-.75-.78.71.71,0,0,0-.74.78V77a.7.7,0,0,0,.74.77.71.71,0,0,0,.75-.77Z"/>
                    <path class="cls-3" d="M169.22,78v-.66h.48V78Z"/>
                    <path class="cls-3" d="M170.6,78v-.33l1.06-1.08.28-.29.21-.25a.89.89,0,0,0,.21-.58.64.64,0,0,0-.68-.69c-.44,0-.69.3-.7.79h-.4a1.23,1.23,0,0,1,.31-.85,1.06,1.06,0,0,1,.79-.31,1,1,0,0,1,1.08,1,1.21,1.21,0,0,1-.26.76c-.1.12-.18.22-.24.28s-.16.17-.3.32l-.81.82h1.65V78Z"/>
                    <path class="cls-3" d="M173.63,77.08h.4a.72.72,0,0,0,.77.64c.48,0,.73-.33.73-.86s-.28-.82-.72-.82a.73.73,0,0,0-.64.31h-.4l.16-1.85h1.8v.37h-1.46l-.1,1.07a1.11,1.11,0,0,1,.71-.24,1,1,0,0,1,.76.29,1.18,1.18,0,0,1,.29.87,1.16,1.16,0,0,1-2.3.22Z"/>
                    <path class="cls-3" d="M176.86,76.92V75.59a1.15,1.15,0,1,1,2.29,0v1.33a1.15,1.15,0,1,1-2.29,0Zm1.89-1.35a.75.75,0,1,0-1.49,0V77a.75.75,0,1,0,1.49,0Z"/>
                </g>
                <g>
                    <path class="cls-3" d="M165.94,96.3V95a1.15,1.15,0,1,1,2.29,0V96.3a1.15,1.15,0,1,1-2.29,0ZM167.83,95a.71.71,0,0,0-.75-.78.7.7,0,0,0-.74.78v1.38a.7.7,0,0,0,.74.77.71.71,0,0,0,.75-.77Z"/>
                    <path class="cls-3" d="M169.22,97.39v-.66h.48v.66Z"/>
                    <path class="cls-3" d="M170.68,96.3V95a1.15,1.15,0,1,1,2.3,0V96.3a1.15,1.15,0,1,1-2.3,0Zm1.9-1.35a.71.71,0,0,0-.75-.78.7.7,0,0,0-.74.78v1.38a.7.7,0,0,0,.74.77.71.71,0,0,0,.75-.77Z"/>
                    <path class="cls-3" d="M174,96.3V95a1.15,1.15,0,1,1,2.29,0V96.3a1.15,1.15,0,1,1-2.29,0ZM175.85,95a.75.75,0,1,0-1.49,0v1.38a.75.75,0,1,0,1.49,0Z"/>
                    <path class="cls-3" d="M177.24,96.3V95a1.15,1.15,0,1,1,2.29,0V96.3a1.15,1.15,0,1,1-2.29,0ZM179.13,95a.71.71,0,0,0-.75-.78.7.7,0,0,0-.74.78v1.38a.7.7,0,0,0,.74.77.71.71,0,0,0,.75-.77Z"/>
                </g>
                <g>
                    <path class="cls-3" d="M125,97.39v-.33L126,96l.29-.3a1.45,1.45,0,0,0,.2-.25.84.84,0,0,0,.21-.57.63.63,0,0,0-.68-.69c-.44,0-.69.3-.69.79h-.4a1.14,1.14,0,0,1,.3-.85,1.06,1.06,0,0,1,.79-.31,1,1,0,0,1,.79.3,1,1,0,0,1,.29.75,1.18,1.18,0,0,1-.26.75l-.24.29-.3.32-.81.81h1.65v.37Z"/>
                    <path class="cls-3" d="M129.5,96.52h.4c0,.36.32.56.75.56s.6-.16.6-.39-.11-.28-.4-.35l-.64-.17c-.39-.1-.61-.28-.61-.66s.38-.76,1-.76,1,.31,1,.91h-.4c0-.36-.26-.54-.64-.54s-.57.16-.57.36.1.27.36.34L131,96c.44.1.66.3.66.68s-.39.79-1,.79S129.5,97.12,129.5,96.52Z"/>
                    <path class="cls-3" d="M132.52,96.5v-.79a1,1,0,0,1,1.08-1,.93.93,0,0,1,1,1v.54h-1.72v.25c0,.36.25.59.68.59s.57-.15.62-.46h.4a.9.9,0,0,1-1,.83A1,1,0,0,1,132.52,96.5Zm.4-.59h1.32V95.7c0-.35-.24-.58-.66-.58s-.66.23-.66.58Z"/>
                    <path class="cls-3" d="M135.49,96.49v-.78a.93.93,0,0,1,1-1,.92.92,0,0,1,1,.92v0h-.4v0c0-.33-.24-.55-.64-.55s-.65.22-.65.58v.8c0,.36.23.58.65.58s.64-.22.64-.56v0h.4v0a1.05,1.05,0,0,1-2.09,0Z"/>
                </g>
                <g>
                    <path class="cls-3" d="M14.5,96.52h.4c0,.36.32.56.75.56s.6-.16.6-.39-.11-.28-.4-.35l-.64-.17c-.39-.1-.61-.28-.61-.66s.38-.76,1-.76,1,.31,1,.91h-.4c0-.36-.26-.54-.64-.54s-.57.16-.57.36.1.27.36.34L16,96c.44.1.66.3.66.68s-.39.79-1,.79S14.5,97.12,14.5,96.52Z"/>
                    <path class="cls-3" d="M17.52,96.5v-.79a1,1,0,0,1,1.08-1,.93.93,0,0,1,1,1v.54H17.92v.25c0,.36.25.59.68.59s.57-.15.62-.46h.4a.9.9,0,0,1-1,.83A1,1,0,0,1,17.52,96.5Zm.4-.59h1.32V95.7c0-.35-.24-.58-.66-.58s-.66.23-.66.58Z"/>
                    <path class="cls-3" d="M20.49,96.49v-.78a.93.93,0,0,1,1.05-1,.92.92,0,0,1,1,.92v0h-.4v0c0-.33-.24-.55-.64-.55s-.65.22-.65.58v.8c0,.36.23.58.65.58s.64-.22.64-.56v0h.4v0a.93.93,0,0,1-1,.93A.93.93,0,0,1,20.49,96.49Z"/>
                    <path class="cls-3" d="M10,94.78A.92.92,0,0,1,10,94.4a.8.8,0,0,1,.22-.29.85.85,0,0,1,.32-.19,1,1,0,0,1,.4-.07,1.09,1.09,0,0,1,.4.07.94.94,0,0,1,.32.19.78.78,0,0,1,.21.29.92.92,0,0,1,.08.38A1.18,1.18,0,0,1,12,95a1,1,0,0,1-.12.23.77.77,0,0,1-.18.18.9.9,0,0,1-.24.12h0a1,1,0,0,1,.29.11,1.1,1.1,0,0,1,.22.21,1.15,1.15,0,0,1,.14.27,1.13,1.13,0,0,1,0,.32,1,1,0,0,1-.33.76,1,1,0,0,1-.36.2,1.31,1.31,0,0,1-.44.07,1.33,1.33,0,0,1-.45-.07,1,1,0,0,1-.36-.2,1,1,0,0,1-.32-.76,1,1,0,0,1,.19-.59.88.88,0,0,1,.22-.21.83.83,0,0,1,.29-.11h0a1,1,0,0,1-.25-.12.77.77,0,0,1-.18-.18A.7.7,0,0,1,10,95,.77.77,0,0,1,10,94.78Zm.3,1.67a.66.66,0,0,0,.05.28.71.71,0,0,0,.15.22.7.7,0,0,0,.23.15.82.82,0,0,0,.28.05.76.76,0,0,0,.27-.05.7.7,0,0,0,.23-.15.71.71,0,0,0,.15-.22.67.67,0,0,0,.06-.28.68.68,0,0,0-.06-.29.71.71,0,0,0-.15-.22.91.91,0,0,0-.23-.15.76.76,0,0,0-.27-.05.82.82,0,0,0-.28.05.91.91,0,0,0-.23.15.71.71,0,0,0-.15.22A.68.68,0,0,0,10.27,96.45Zm.12-1.65a.57.57,0,0,0,.16.42.57.57,0,0,0,.43.16.57.57,0,0,0,.42-.16.59.59,0,0,0-.42-1,.58.58,0,0,0-.43.17A.57.57,0,0,0,10.39,94.8Z"/>
                </g>
            </g>
            <g>
                <text class="dataFont" id="dataValue" x="7" y="124">0.000000</text>
            </g>
            <path id="graph"></path>
        </g>
    </g>
</svg>

<script>
    var dataValue = document.querySelector('#dataValue');
    var graph = document.querySelector('#graph');

    var minY = 5.33;
    var maxY = 86.23;
    var minX = 6.27;
    var maxX = 162.44;
    
    var properties = {
        value: 0,
        unitMax: 1,
        unitMin: 0,
        unit: ""
    };
    
    var time = 60;
    var ticks = time * 2; // two seconds per box

    var min = 0;
    var max = 1;

    var isConstant = false;

    var data = [];
    var isReady = false;

    for (var i = 0; i <= ticks; i++){
        data.push(0.5); // initialize with line in middle
    }

    function renderProperties() {

        if (!isReady) {
            return;
        }
        
        function scaleVal(number) {
            return (number * (properties.unitMax-properties.unitMin))+properties.unitMin;
        }

        dataValue.textContent = scaleVal(properties.value).toPrecision(7).substring(0,8);

        if (properties.unit) {
            // dataName.textContent = properties.unit;
            dataValue.textContent = dataValue.textContent + ' ' + properties.unit;
        }

        var path = [];
        
        var prevY = 0;

        for (var i = 0; i < ticks; i++) {
            
            // var x = i * width / (ticks - 1);
            var x = minX + i * (maxX - minX) / (ticks - 1);
            
            var value = 0;
            if (i < data.length) {
                value = 1/(max-min)*(data[i]-min);
            }

            if(!value) value = 0;
            // var y = (1 - value) * height;
            var y = minY + (1 - value) * (maxY - minY);

            if(y<=0)value = 0;
            if(y>=1)value = 1;

            if (i === 0) {
                path.push('M', x, y, 'L');
                prevY = y;
            }
            
            // this makes it a square-like line instead of diagonal lines, and only adds points to path if on a corner
            if (y !== prevY) {
                path.push(x);
                path.push(prevY);

                path.push(x);
                path.push(y);
            }
            
            // ensures the line has an endpoint
            if (i === ticks-1) {
                path.push(x);
                path.push(y);
            }
            
            prevY = y;
        }

        var pathString = path.join(' ');
        graph.setAttribute('d', pathString);

        // var pathExtension = [];
        // pathExtension.push(600);
        // pathExtension.push(289);
        //
        // pathExtension.push(3);
        // pathExtension.push(289);
        // // path.push(width);
        // //path.push(height);
        // //path.push('Z');
        //
        // var pathExtensionString = pathExtension.join(' ');
        // graphBg.setAttribute('d', pathString + ' ' + pathExtensionString);
    }

    function ready() {
        isReady = true;
        renderProperties();
    }

    ready();

    var interval = setInterval(function(){
        if (isConstant && properties.value === data[data.length-1]) {
            // don't do anything
        } else {
            isConstant = false;
            data.push(properties.value);
            data.shift();
            renderProperties();
        }

    }, time);

    try {
        var realityInterface = new RealityInterface();
        var envelopeContents = new EnvelopeContents(realityInterface, document.body); // just initializing this makes it compatible with envelopes
        realityInterface.addReadListener('value', function(e) {
            properties.value = e.value;
            properties.unit = e.unit;
            properties.unitMax = e.unitMax;
            properties.unitMin = e.unitMin;
            // console.log(e);
        });
        realityInterface.setMoveDelay(10);
        // realityInterface.useSimplifiedPointerEvents();
        //  {value: 0.4565680618804775, mode: "f", unit: "volt", unitMin: 300, unitMax: 0}
    } catch (e) {
        console.warn('Reality Interface is not accessible');

        // test suite for in-browser simulation without loading in AR
        function mockReadListenerTrigger(e) {
            properties.value = e;
        }
    }
    
    function allEqual(arr) {
        return new Set(arr).size === 1;
    }

    setInterval(function() {
        if (!isConstant) {
            if (allEqual(data)) {
                isConstant = true;
            }
        }
    }, 1000); // at a low latency, check if all values are equal so we can stop wasting resources re-rendering if the values never change

</script>

</body>
</html>
