<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>reality-sensor-graph</title>
    <style>
        #container {
            border: 2px solid #fff;
            background: rgba(255, 255, 255, 0.3);
            margin: 0;
            padding: 0;
        }

        #graph {
            stroke: none;
            fill: #00ff00;
        }
    </style>
    <script src="objectDefaultFiles/object.js"></script>
</head>
<body>

<svg id="container" width="300" height="300" version="1.1" xmlns="http://www.w3.org/2000/svg" touch-action="none">
    <path id="graph"></path>
</svg>

<script>
    var graph = document.querySelector('#graph');

    var properties = {
        value: 0
    };

    var width = 300;
    var height = 300;
    var ticks = 10;

    var data = [0.2, 0.1, 0.3, 0.4, 0.7, 0.8, 0.5, 0.6, 0.4, 0.9];
    var isReady = false;

    function renderProperties() {
        if (!isReady) {
            return;
        }
        var path = ['M 0', height, 'L'];
        for (var i = 0; i < ticks; i++) {
            var x = i * width / (ticks - 1);
            var value = 0;
            if (i < data.length) {
                value = data[i];
            }
            var y = (1 - value) * height;
            path.push(x);
            path.push(y);
        }
        path.push(width);
        path.push(height);
        path.push('Z');

        graph.setAttribute('d', path.join(' '));
    }

    function ready() {
        isReady = true;
        renderProperties();
    }

    ready();

    var realityInterface = new RealityInterface();
    realityInterface.addReadListener('value', function(e) {
        if (!isReady) {
            return;
        }
        properties.value = e.value;
        data.push(properties.value);
        data.shift();
        renderProperties();
    });
    realityInterface.setMoveDelay(10);

</script>

</body>
</html>
